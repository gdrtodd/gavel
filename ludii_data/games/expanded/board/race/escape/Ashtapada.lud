(game "Ashtapada" (players 2) (equipment {(board (square 8) {(track "Track1" "3,E,N,W,S,E1,N6,E5,S5,W4,N4,E3,S3,W1" 1 directed:True) (track "Track2" "60,W,S,E,N,W1,S6,W5,N5,E4,S4,W3,N3,E1" 2 directed:True) (track "Track3" "31,N,W,S,E,N1,W6,N5,E5,S4,W4,N3,E3,S1" 3 directed:True) (track "Track4" "32,S,E,N,W,S1,E6,S5,W5,N4,E4,S3,W3,N1" 4 directed:True)}) (dice d:2 from:0 num:4) (hand Each) (map "DieValue" {(pair 4 8)}) (map "Entry" {(pair P1 "D1") (pair P2 "E8")}) (map "Exit" {(pair P1 "E3") (pair P2 "D6")}) (regions "Protect" (sites {"A1" "A4" "A5" "A8" "D1" "D4" "D5" "D8" "E1" "E4" "E5" "E8" "H1" "H4" "H5" "H8"})) (piece "Disc" Each (if (!= (trackSite Move steps:(mapEntry "DieValue" (count Pips))) -1) (if (if (is In (trackSite Move steps:(mapEntry "DieValue" (count Pips))) (sites "Protect")) (not (is Enemy (who at:(trackSite Move steps:(mapEntry "DieValue" (count Pips)))))) True) (move (from) (to (trackSite Move steps:(mapEntry "DieValue" (count Pips))) (apply if:(is Enemy (who at:(to))) (fromTo (from (to)) (to (handSite (who at:(to)))))))))))}) (rules (start {(place "Disc1" (handSite P1) count:2) (place "Disc2" (handSite P2) count:2)}) (play (do (if (not (is Prev Mover)) (roll)) next:(if (is Prev Mover) (or (forEach Piece (if (= (from) (mapEntry "Exit" Mover)) (move Remove (from)) (if (!= (trackSite Move steps:1) -1) (if (if (is In (trackSite Move steps:1) (sites "Protect")) (not (is Enemy (who at:(trackSite Move steps:1)))) True) (move (from) (to (trackSite Move steps:1) (apply if:(is Enemy (who at:(to))) (fromTo (from (to)) (to (handSite (who at:(to)))))))))))) (if (not (all Sites (sites Hand Mover) if:(= 0 (count Cell at:(site))))) (move (from (handSite Mover)) (to (mapEntry "Entry" Mover) if:(not (is Enemy (who at:(to)))))))) (if (can Move (forEach Piece)) (forEach Piece (then (if (= (count Pips) 3) (moveAgain)))) (move Pass (then (if (= (count Pips) 3) (moveAgain)))))))) (end (if (no Pieces Mover) (result Mover Win))))) 