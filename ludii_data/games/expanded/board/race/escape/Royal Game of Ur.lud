(game "Royal Game of Ur" (players 2) (equipment {(board (hole (hole (rectangle 3 8) (poly {{4 0} {4 1} {6 1} {6 0}})) (poly {{4 2} {4 3} {6 3} {6 2}})) {(track "Track1" "20,3,W,N1,E,S1,W,End" P1 directed:True) (track "Track2" "21,17,W,S1,E,N1,W,End" P2 directed:True)}) (dice d:2 from:0 num:4) (hand Each) (regions "Replay" (sites {"A1" "A3" "D2" "G1" "G3"})) (piece "UrPiece" Each (if (= (trackSite Move steps:(count Pips)) -2) (move Remove (from)) (if (!= (trackSite Move steps:(count Pips)) -1) (if (or (is Empty (trackSite Move steps:(count Pips))) (and (not (is Friend (who at:(trackSite Move steps:(count Pips))))) (not (is In (trackSite Move steps:(count Pips)) (sites "Replay"))))) (move (from) (to (trackSite Move steps:(count Pips)) (apply if:(is Enemy (who at:(to))) (fromTo (from (to)) (to (handSite Next))))) (then (if (is In (last To) (sites "Replay")) (moveAgain))))))))}) (rules (start {(place "UrPiece1" (handSite P1) count:7) (place "UrPiece2" (handSite P2) count:7)}) (play (do (roll) next:(if (!= (count Pips) 0) (or (forEach Piece) (forEach Piece container:(mover)))))) (end (if (no Pieces Mover) (result Mover Win))))) 