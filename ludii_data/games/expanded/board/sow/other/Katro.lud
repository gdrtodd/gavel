(game "Katro" (players 2) (equipment {(mancalaBoard 6 6 store:None {(track "TrackCCW1" "0,E,N1,W,N1,E" loop:True P1) (track "TrackCW1" "5,W,N1,E,N1,W" loop:True P1) (track "TrackCW2" "18,E,N1,W,N1,E" loop:True P2) (track "TrackCCW2" "23,W,N1,E,N1,W" loop:True P2)}) (piece "Seed" Shared) (regions "Home" P1 (sites Track "TrackCCW1")) (regions "Home" P2 (sites Track "TrackCCW2")) (regions "Inner" P1 (sites Row 2)) (regions "Inner" P2 (sites Row 3)) (regions "Middle" P1 (sites Row 1)) (regions "Middle" P2 (sites Row 4)) (regions "Outer" P1 (sites Bottom)) (regions "Outer" P2 (sites Top))}) (rules (start (set Count 2 to:(sites Board))) (play (or {(if (or (= (value Player Mover) 1) (<= (value Player Mover) 0)) (move Select (from (if (is Prev Mover) (sites {(last To afterConsequence:True)}) (if (!= 0 (count in:(sites Mover "Outer"))) (sites Mover "Outer") (if (!= 0 (count in:(sites Mover "Middle"))) (sites Mover "Middle") (sites Mover "Inner")))) if:(> (count at:(from)) 0)) (then (sow "TrackCCW" owner:(mover) apply:(if (> (count at:(to)) 1) (and {(if (<= (value Player Mover) 0) (set Value Mover 1)) (moveAgain) (if (is In (to) (sites Mover "Inner")) (if (!= 0 (count at:(if (is Mover P1) (+ (to) 6) (- (to) 6)))) (fromTo (from (if (is Mover P1) (+ (to) 6) (- (to) 6))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) 6) (- (to) 6)))) (if (!= 0 (count at:(if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2))))) (fromTo (from (if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2)))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2))))) (if (!= 0 (count at:(if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3))))) (fromTo (from (if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3)))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3)))))))))}) (set Value Mover 0)))))) (if (or (= (value Player Mover) 2) (<= (value Player Mover) 0)) (move Select (from (if (is Prev Mover) (sites {(last To afterConsequence:True)}) (if (!= 0 (count in:(sites Mover "Outer"))) (sites Mover "Outer") (if (!= 0 (count in:(sites Mover "Middle"))) (sites Mover "Middle") (sites Mover "Inner")))) if:(> (count at:(from)) 0)) (then (sow "TrackCW" owner:(mover) apply:(if (> (count at:(to)) 1) (and {(if (<= (value Player Mover) 0) (set Value Mover 2)) (moveAgain) (if (is In (to) (sites Mover "Inner")) (if (!= 0 (count at:(if (is Mover P1) (+ (to) 6) (- (to) 6)))) (fromTo (from (if (is Mover P1) (+ (to) 6) (- (to) 6))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) 6) (- (to) 6)))) (if (!= 0 (count at:(if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2))))) (fromTo (from (if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2)))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) (* 6 2)) (- (to) (* 6 2))))) (if (!= 0 (count at:(if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3))))) (fromTo (from (if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3)))) (to (to)) count:(count at:(if (is Mover P1) (+ (to) (* 6 3)) (- (to) (* 6 3)))))))))}) (set Value Mover 0)))))) (if (and (= (count in:(sites Mover "Home")) 1) (= (count in:(sites Mover "Outer")) 1)) (move (from (sites Mover "Outer") if:(> (count at:(from)) 0)) (to (if (is Mover P1) (ahead (from) N) (ahead (from) S))))) (if (and (= (count in:(sites Mover "Home")) 1) (= (count in:(sites Mover "Middle")) 1)) (move (from (sites Mover "Middle") if:(and (> (count at:(from)) 0) (< 1 (count in:(sites Column (column of:(from))))))) (to (if (is Mover P1) (ahead (from) N) (ahead (from) S))) (then (and (if (!= 0 (count at:(if (is Mover P1) (+ (last To) 6) (- (last To) 6)))) (fromTo (from (if (is Mover P1) (+ (last To) 6) (- (last To) 6))) (to (last To)) count:(count at:(if (is Mover P1) (+ (last To) 6) (- (last To) 6)))) (if (!= 0 (count at:(if (is Mover P1) (+ (last To) (* 6 2)) (- (last To) (* 6 2))))) (fromTo (from (if (is Mover P1) (+ (last To) (* 6 2)) (- (last To) (* 6 2)))) (to (last To)) count:(count at:(if (is Mover P1) (+ (last To) (* 6 2)) (- (last To) (* 6 2))))) (if (!= 0 (count at:(if (is Mover P1) (+ (last To) (* 6 3)) (- (last To) (* 6 3))))) (fromTo (from (if (is Mover P1) (+ (last To) (* 6 3)) (- (last To) (* 6 3)))) (to (last To)) count:(count at:(if (is Mover P1) (+ (last To) (* 6 3)) (- (last To) (* 6 3)))))))) (moveAgain)))))})) (end (forEach NonMover if:(all Sites (sites Player "Home") if:(= 0 (count at:(site)))) (result Player Loss))))) 