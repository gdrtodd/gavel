(game "Kanji Guti" (players 2) (equipment {(mancalaBoard 2 7 store:None (track "Track" "0,E,N,W" loop:True)) (piece "Seed" Shared) (hand Each) (regions "Home" P1 (expand (sites Left) steps:2)) (regions "Home" P2 (expand (sites Right) steps:2))}) (rules (start {(set Count 1 at:(coord "D1")) (set Count 12 to:(difference (sites Track) (sites Centre)))}) (play (move Select (from (if (is Prev Mover) (sites {(trackSite Move from:(last To afterConsequence:True) steps:1)}) (sites Mover)) if:(< 0 (count at:(from)))) (then (sow apply:(if (> (count at:(trackSite Move from:(to) steps:1)) 0) (moveAgain) (if (> (count at:(if (is In (trackSite Move from:(to) steps:1) (sites Bottom)) (+ (trackSite Move from:(to) steps:1) 7) (- (trackSite Move from:(to) steps:1) 7))) 0) (fromTo (from (if (is In (trackSite Move from:(to) steps:1) (sites Bottom)) (+ (trackSite Move from:(to) steps:1) 7) (- (trackSite Move from:(to) steps:1) 7))) (to (handSite Mover)) count:(count at:(if (is In (trackSite Move from:(to) steps:1) (sites Bottom)) (+ (trackSite Move from:(to) steps:1) 7) (- (trackSite Move from:(to) steps:1) 7)))))))))) (end (if (= 0 (count in:(sites Track))) (byScore {(score P1 (count Cell at:(handSite P1))) (score P2 (count Cell at:(handSite P2)))}))))) 