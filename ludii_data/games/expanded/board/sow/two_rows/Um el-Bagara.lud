(game "Um el-Bagara" (players 2) (equipment {(mancalaBoard 2 5 store:None {(track "TrackCCW" "0,E,N,W" loop:True) (track "TrackCW" "4,W,N,E" loop:True)}) (regions "Home1" P1 (sites Bottom)) (regions "Home2" P2 (sites Top)) (regions "Left1" P1 (sites {0 1 2})) (regions "Left2" P2 (sites {9 8 7})) (regions "Right1" P1 (sites {2 3 4})) (regions "Right2" P2 (sites {7 6 5})) (piece "Seed" Shared) (hand Each)}) (rules (start (set Count 5 to:(sites Track))) (play (or (move Select (from (sites Mover "Left") if:(> (count at:(from)) 1)) (then (sow "TrackCW" if:(and (is In (to) (sites Next "Home")) (or (= (count at:(to)) 2) (= (count at:(to)) 4))) apply:(fromTo (from (to)) (to (handSite Mover)) count:(count at:(to))) backtracking:True))) (move Select (from (sites Mover "Right") if:(> (count at:(from)) 1)) (then (sow "TrackCCW" if:(and (is In (to) (sites Next "Home")) (or (= (count at:(to)) 2) (= (count at:(to)) 4))) apply:(fromTo (from (to)) (to (handSite Mover)) count:(count at:(to))) backtracking:True))))) (end (if (all Passed) (byScore {(score P1 (+ (count Cell at:(handSite P1)) (count in:(sites P1)))) (score P2 (+ (count Cell at:(handSite P2)) (count in:(sites P2))))}))))) 