(game "Brain Coral" (players 2) (equipment {(board (hex Limping (- 5 1)) use:Cell) (piece "Ball" Each) (piece "Disc" Each)}) (rules (start (set Score Each 0)) (play (do (move Add (to (sites Empty))) ifAfterwards:(all Sites (sites Around (last To) Orthogonal includeSelf:True) if:(or (and (is Empty (site)) (is In (site) (sites Outer))) (!= Infinity (count Steps (step Orthogonal (to if:(is Empty (to)))) (site) (difference (sites Outer) (site)))))) (then (set Var "MoverScore" (+ (max 0 (max (sizes Group Orthogonal Mover))) (count Groups Orthogonal if:(= (who at:(to)) (mover)))) (then (set Var "NextScore" (+ (max 0 (max (sizes Group Orthogonal Next))) (count Groups Orthogonal if:(= (who at:(to)) (next)))) (then (if (= (var "MoverScore") (var "NextScore")) (and (set Score Mover (* -1 (max 0 (max (difference (sizes Group Orthogonal Mover) (sizes Group Orthogonal Next)))))) (set Score Next (* -1 (max 0 (max (difference (sizes Group Orthogonal Next) (sizes Group Orthogonal Mover))))))) (and (set Score Mover (var "MoverScore")) (set Score Next (var "NextScore"))))))))))) (end (if (no Moves Next) {(if (= (score Mover) (score Next)) (result Mover Win)) (if (!= (score Mover) (score Next)) (byScore))})))) 