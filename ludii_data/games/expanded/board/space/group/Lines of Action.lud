(game "Lines of Action" (players 2) (equipment {(board (square 8)) (piece "Disc" Each (or {(move Hop (directions {N S}) (between (exact (- (count Sites in:(difference (sites Column (column of:(from))) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {W E}) (between (exact (- (count Sites in:(difference (sites Row (row of:(from))) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {NE SW}) (between (exact (- (count Sites in:(difference (sites Direction from:(from) (directions {NE SW}) included:True) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {NW SE}) (between (exact (- (count Sites in:(difference (sites Direction from:(from) (directions {NW SE}) included:True) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to))))))}))}) (rules (start {(place "Disc1" (difference (union (sites Top) (sites Bottom)) (sites Corners))) (place "Disc2" (difference (union (sites Right) (sites Left)) (sites Corners)))}) (play (forEach Piece)) (end {(if (and (= 1 (count Groups if:(= (who at:(to)) P1))) (= 1 (count Groups if:(= (who at:(to)) P2)))) (result Mover Draw)) (if (= 1 (count Groups if:(= (who at:(to)) P1))) (result P1 Win)) (if (= 1 (count Groups if:(= (who at:(to)) P2))) (result P2 Win))}))) 