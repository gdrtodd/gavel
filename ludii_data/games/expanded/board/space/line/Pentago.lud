(game "Pentago" (players 2) (equipment {(board (square 6) use:Vertex) (piece "Ball" Each) (regions "BottomLeft" (expand origin:(coord "B2") All)) (regions "BottomRight" (expand origin:(coord "E2") All)) (regions "TopLeft" (expand origin:(coord "B5") All)) (regions "TopRight" (expand origin:(coord "E5") All))}) (rules phases:{(phase "Place" (play (move Add (to (sites Empty)) (then (moveAgain)))) (end (if (is Line 5 All) (result Mover Win))) (nextPhase Mover "Rotate")) (phase "Rotate" (play (or (move Select (from (sites {"B2" "B5" "E2" "E5"})) (then (if (= (last To) (coord "E5")) (do (and {(set Var "TopLeft" (what at:(coord "D6"))) (set Var "TopRight" (what at:(coord "F6"))) (set Var "BottomRight" (what at:(coord "F4"))) (set Var "BottomLeft" (what at:(coord "D4"))) (set Var "Bottom" (what at:(coord "E4"))) (set Var "Left" (what at:(coord "D5"))) (set Var "Top" (what at:(coord "E6"))) (set Var "Right" (what at:(coord "F5")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "D6"))) (if (!= 0 (var "TopRight")) (remove (coord "F6"))) (if (!= 0 (var "BottomRight")) (remove (coord "F4"))) (if (!= 0 (var "BottomLeft")) (remove (coord "D4"))) (if (!= 0 (var "Bottom")) (remove (coord "E4"))) (if (!= 0 (var "Left")) (remove (coord "D5"))) (if (!= 0 (var "Top")) (remove (coord "E6"))) (if (!= 0 (var "Right")) (remove (coord "F5"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "F6")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "F4")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "D4")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "D6")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "D5")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "E6")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "F5")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "E4"))))})) (if (= (last To) (coord "B5")) (do (and {(set Var "TopLeft" (what at:(coord "A6"))) (set Var "TopRight" (what at:(coord "C6"))) (set Var "BottomRight" (what at:(coord "C4"))) (set Var "BottomLeft" (what at:(coord "A4"))) (set Var "Bottom" (what at:(coord "B4"))) (set Var "Left" (what at:(coord "A5"))) (set Var "Top" (what at:(coord "B6"))) (set Var "Right" (what at:(coord "C5")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "A6"))) (if (!= 0 (var "TopRight")) (remove (coord "C6"))) (if (!= 0 (var "BottomRight")) (remove (coord "C4"))) (if (!= 0 (var "BottomLeft")) (remove (coord "A4"))) (if (!= 0 (var "Bottom")) (remove (coord "B4"))) (if (!= 0 (var "Left")) (remove (coord "A5"))) (if (!= 0 (var "Top")) (remove (coord "B6"))) (if (!= 0 (var "Right")) (remove (coord "C5"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "C6")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "C4")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "A4")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "A6")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "A5")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "B6")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "C5")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "B4"))))})) (if (= (last To) (coord "B2")) (do (and {(set Var "TopLeft" (what at:(coord "A3"))) (set Var "TopRight" (what at:(coord "C3"))) (set Var "BottomRight" (what at:(coord "C1"))) (set Var "BottomLeft" (what at:(coord "A1"))) (set Var "Bottom" (what at:(coord "B1"))) (set Var "Left" (what at:(coord "A2"))) (set Var "Top" (what at:(coord "B3"))) (set Var "Right" (what at:(coord "C2")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "A3"))) (if (!= 0 (var "TopRight")) (remove (coord "C3"))) (if (!= 0 (var "BottomRight")) (remove (coord "C1"))) (if (!= 0 (var "BottomLeft")) (remove (coord "A1"))) (if (!= 0 (var "Bottom")) (remove (coord "B1"))) (if (!= 0 (var "Left")) (remove (coord "A2"))) (if (!= 0 (var "Top")) (remove (coord "B3"))) (if (!= 0 (var "Right")) (remove (coord "C2"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "C3")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "C1")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "A1")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "A3")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "A2")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "B3")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "C2")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "B1"))))})) (do (and {(set Var "TopLeft" (what at:(coord "D3"))) (set Var "TopRight" (what at:(coord "F3"))) (set Var "BottomRight" (what at:(coord "F1"))) (set Var "BottomLeft" (what at:(coord "D1"))) (set Var "Bottom" (what at:(coord "E1"))) (set Var "Left" (what at:(coord "D2"))) (set Var "Top" (what at:(coord "E3"))) (set Var "Right" (what at:(coord "F2")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "D3"))) (if (!= 0 (var "TopRight")) (remove (coord "F3"))) (if (!= 0 (var "BottomRight")) (remove (coord "F1"))) (if (!= 0 (var "BottomLeft")) (remove (coord "D1"))) (if (!= 0 (var "Bottom")) (remove (coord "E1"))) (if (!= 0 (var "Left")) (remove (coord "D2"))) (if (!= 0 (var "Top")) (remove (coord "E3"))) (if (!= 0 (var "Right")) (remove (coord "F2"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "F3")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "F1")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "D1")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "D3")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "D2")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "E3")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "F2")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "E1"))))}))))))) (move Select (from (sites {"B2" "B5" "E2" "E5"})) (then (if (= (last To) (coord "E5")) (do (and {(set Var "TopLeft" (what at:(coord "D6"))) (set Var "TopRight" (what at:(coord "F6"))) (set Var "BottomRight" (what at:(coord "F4"))) (set Var "BottomLeft" (what at:(coord "D4"))) (set Var "Bottom" (what at:(coord "E4"))) (set Var "Left" (what at:(coord "D5"))) (set Var "Top" (what at:(coord "E6"))) (set Var "Right" (what at:(coord "F5")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "D6"))) (if (!= 0 (var "TopRight")) (remove (coord "F6"))) (if (!= 0 (var "BottomRight")) (remove (coord "F4"))) (if (!= 0 (var "BottomLeft")) (remove (coord "D4"))) (if (!= 0 (var "Bottom")) (remove (coord "E4"))) (if (!= 0 (var "Left")) (remove (coord "D5"))) (if (!= 0 (var "Top")) (remove (coord "E6"))) (if (!= 0 (var "Right")) (remove (coord "F5"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "D4")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "D6")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "F6")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "F4")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "F5")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "E4")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "D5")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "E6"))))})) (if (= (last To) (coord "B5")) (do (and {(set Var "TopLeft" (what at:(coord "A6"))) (set Var "TopRight" (what at:(coord "C6"))) (set Var "BottomRight" (what at:(coord "C4"))) (set Var "BottomLeft" (what at:(coord "A4"))) (set Var "Bottom" (what at:(coord "B4"))) (set Var "Left" (what at:(coord "A5"))) (set Var "Top" (what at:(coord "B6"))) (set Var "Right" (what at:(coord "C5")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "A6"))) (if (!= 0 (var "TopRight")) (remove (coord "C6"))) (if (!= 0 (var "BottomRight")) (remove (coord "C4"))) (if (!= 0 (var "BottomLeft")) (remove (coord "A4"))) (if (!= 0 (var "Bottom")) (remove (coord "B4"))) (if (!= 0 (var "Left")) (remove (coord "A5"))) (if (!= 0 (var "Top")) (remove (coord "B6"))) (if (!= 0 (var "Right")) (remove (coord "C5"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "A4")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "A6")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "C6")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "C4")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "C5")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "B4")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "A5")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "B6"))))})) (if (= (last To) (coord "B2")) (do (and {(set Var "TopLeft" (what at:(coord "A3"))) (set Var "TopRight" (what at:(coord "C3"))) (set Var "BottomRight" (what at:(coord "C1"))) (set Var "BottomLeft" (what at:(coord "A1"))) (set Var "Bottom" (what at:(coord "B1"))) (set Var "Left" (what at:(coord "A2"))) (set Var "Top" (what at:(coord "B3"))) (set Var "Right" (what at:(coord "C2")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "A3"))) (if (!= 0 (var "TopRight")) (remove (coord "C3"))) (if (!= 0 (var "BottomRight")) (remove (coord "C1"))) (if (!= 0 (var "BottomLeft")) (remove (coord "A1"))) (if (!= 0 (var "Bottom")) (remove (coord "B1"))) (if (!= 0 (var "Left")) (remove (coord "A2"))) (if (!= 0 (var "Top")) (remove (coord "B3"))) (if (!= 0 (var "Right")) (remove (coord "C2"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "A1")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "A3")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "C3")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "C1")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "C2")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "B1")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "A2")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "B3"))))})) (do (and {(set Var "TopLeft" (what at:(coord "D3"))) (set Var "TopRight" (what at:(coord "F3"))) (set Var "BottomRight" (what at:(coord "F1"))) (set Var "BottomLeft" (what at:(coord "D1"))) (set Var "Bottom" (what at:(coord "E1"))) (set Var "Left" (what at:(coord "D2"))) (set Var "Top" (what at:(coord "E3"))) (set Var "Right" (what at:(coord "F2")))}) next:(and {(if (!= 0 (var "TopLeft")) (remove (coord "D3"))) (if (!= 0 (var "TopRight")) (remove (coord "F3"))) (if (!= 0 (var "BottomRight")) (remove (coord "F1"))) (if (!= 0 (var "BottomLeft")) (remove (coord "D1"))) (if (!= 0 (var "Bottom")) (remove (coord "E1"))) (if (!= 0 (var "Left")) (remove (coord "D2"))) (if (!= 0 (var "Top")) (remove (coord "E3"))) (if (!= 0 (var "Right")) (remove (coord "F2"))) (if (!= 0 (var "TopLeft")) (add (piece (var "TopLeft")) (to (coord "D1")))) (if (!= 0 (var "TopRight")) (add (piece (var "TopRight")) (to (coord "D3")))) (if (!= 0 (var "BottomRight")) (add (piece (var "BottomRight")) (to (coord "F3")))) (if (!= 0 (var "BottomLeft")) (add (piece (var "BottomLeft")) (to (coord "F1")))) (if (!= 0 (var "Bottom")) (add (piece (var "Bottom")) (to (coord "F2")))) (if (!= 0 (var "Left")) (add (piece (var "Left")) (to (coord "E1")))) (if (!= 0 (var "Top")) (add (piece (var "Top")) (to (coord "D2")))) (if (!= 0 (var "Right")) (add (piece (var "Right")) (to (coord "E3"))))}))))))))) (end {(if (and (is Line 5 All throughAny:(if (is In (last To) (sites "BottomLeft")) (intersection (sites Occupied by:Mover) (sites "BottomLeft")) (if (is In (last To) (sites "BottomRight")) (intersection (sites Occupied by:Mover) (sites "BottomRight")) (if (is In (last To) (sites "TopLeft")) (intersection (sites Occupied by:Mover) (sites "TopLeft")) (intersection (sites Occupied by:Mover) (sites "TopRight")))))) (is Line 5 All throughAny:(if (is In (last To) (sites "BottomLeft")) (intersection (sites Occupied by:Next) (sites "BottomLeft")) (if (is In (last To) (sites "BottomRight")) (intersection (sites Occupied by:Next) (sites "BottomRight")) (if (is In (last To) (sites "TopLeft")) (intersection (sites Occupied by:Next) (sites "TopLeft")) (intersection (sites Occupied by:Next) (sites "TopRight"))))))) (result Mover Draw)) (if (is Line 5 All throughAny:(if (is In (last To) (sites "BottomLeft")) (intersection (sites Occupied by:Mover) (sites "BottomLeft")) (if (is In (last To) (sites "BottomRight")) (intersection (sites Occupied by:Mover) (sites "BottomRight")) (if (is In (last To) (sites "TopLeft")) (intersection (sites Occupied by:Mover) (sites "TopLeft")) (intersection (sites Occupied by:Mover) (sites "TopRight")))))) (result Mover Win)) (if (is Line 5 All throughAny:(if (is In (last To) (sites "BottomLeft")) (intersection (sites Occupied by:Next) (sites "BottomLeft")) (if (is In (last To) (sites "BottomRight")) (intersection (sites Occupied by:Next) (sites "BottomRight")) (if (is In (last To) (sites "TopLeft")) (intersection (sites Occupied by:Next) (sites "TopLeft")) (intersection (sites Occupied by:Next) (sites "TopRight")))))) (result Next Win))}) (nextPhase Mover "Place"))})) 