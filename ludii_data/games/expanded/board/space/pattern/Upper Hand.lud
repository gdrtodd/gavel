(game "Upper Hand" (players 2) (equipment {(board (square 5 pyramidal:True) use:Vertex) (piece "Ball" Each) (piece "Ball" Neutral)}) (rules (start (place "Ball0" (centrePoint))) (play (move Add (to (sites Empty) if:(is Flat)) (then (while (not (all Sites (sites Board) if:(not (can Move (or (and {(if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) UNE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USE))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) USE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USW))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) USW) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) UNE) if:(is Flat)))))}) (and {(if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) UNE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USE))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) USE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USW))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) USW) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) UNE) if:(is Flat)))))})))))) (forEach Site (sites Board) (and (and {(if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) UNE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USE))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) USE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USW))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) USW) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P1) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)}))))) (add (piece (id "Ball" P1)) (to (ahead (site) UNE) if:(is Flat)))))}) (and {(if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) N) (ahead (site) E) (ahead (ahead (site) N) E)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) UNE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USE))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) E)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) S) (ahead (site) E) (ahead (ahead (site) S) E)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) USE) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) USW))) (and (!= (site) (ahead (site) S)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) S) (ahead (site) W) (ahead (ahead (site) S) W)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) USW) if:(is Flat))))) (if (and (and (is Occupied (site)) (is Empty (ahead (site) UNE))) (and (!= (site) (ahead (site) N)) (!= (site) (ahead (site) W)))) (if (and (= 0 (count Sites in:(intersection (sites Empty) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)})))) (<= 3 (count Sites in:(intersection (sites Occupied by:P2) (sites {(site) (ahead (site) N) (ahead (site) W) (ahead (ahead (site) N) W)}))))) (add (piece (id "Ball" P2)) (to (ahead (site) UNE) if:(is Flat)))))}))))))) (end (if (<= 27 (count Sites in:(sites Occupied by:Mover))) (result Mover Win))))) 