(game "Lifeline" (players 2) (equipment {(board (dual (tri Hexagon 7))) (piece "Disc" Each) (piece "Shi_Western" P2) (hand P2)}) (rules (meta (swap)) phases:{(phase "Opening" (play (move Select (from (sites Empty)) (to (sites Empty) if:(not (is In (from) (sites Around (to) includeSelf:True)))) (then (and (add (to (last To))) (add (to (last From))))))) (nextPhase (and (= 2 (count Sites in:(sites Occupied by:P1 component:"Disc"))) (= 2 (count Sites in:(sites Occupied by:P2 component:"Disc")))) "Play")) (phase "Play" (play (or (if (and {(< 0 (size Stack at:(handSite P2))) (= (mover) (id P2)) (< 0 (count Pieces Mover in:(sites Board)))}) (move Remove (handSite P2))) (move Add (to (sites Empty) if:(and (not (no Pieces Mover in:(sites Board))) (> Infinity (count Steps Orthogonal (step (to if:(or (is Empty (to)) (is Mover (who at:(to)))))) (to) (sites Occupied by:Mover))))) (then (forEach Group Orthogonal if:(is Enemy (who at:(to))) (if (not (and (< 0 (count Sites in:(difference (sites Occupied by:Enemy component:"Disc") (sites)))) (not (all Sites (sites) if:(not (> Infinity (count Steps Orthogonal (step (to if:(or (is Empty (to)) (is Enemy (who at:(to)))))) (site) (difference (sites Occupied by:Enemy) (sites))))))))) (remove (sites)) (pass)) (then (forEach Group Orthogonal if:(is Mover (who at:(to))) (if (not (and (< 0 (count Sites in:(difference (sites Occupied by:Mover component:"Disc") (sites)))) (not (all Sites (sites) if:(not (> Infinity (count Steps Orthogonal (step (to if:(or (is Empty (to)) (is Mover (who at:(to)))))) (site) (difference (sites Occupied by:Mover) (sites))))))))) (remove (sites)) (pass))))))))))} (end (if (and (no Moves Next) (< 2 (count Moves))) (result Next Loss))))) 