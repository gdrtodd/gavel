(game "Tablut" (players 2) (equipment {(board (square 9)) (piece "Thrall" P1 (move Slide Orthogonal (between if:(and (!= (between) (centrePoint)) (is Empty (between)))) (then (or {(custodial (from (last To)) Orthogonal (between (max 1) if:(= (what at:(between)) (id "Thrall2")) (apply (remove (between)))) (to if:(or (is Friend (who at:(to))) (= (to) (centrePoint))))) (surround (from (last To)) Orthogonal (between if:(and (= (what at:(between)) (id "Jarl2")) (or (= (between) (centrePoint)) (is In (between) (sites "OrthogonalSitesCentre")))) (apply (trigger "Surrounded" P2))) (to if:(or (is Friend (who at:(to))) (= (to) (centrePoint))))) (custodial (from (last To)) Orthogonal (between (max 1) if:(and (= (what at:(between)) (id "Jarl2")) (and (!= (between) (centrePoint)) (not (is In (between) (sites "OrthogonalSitesCentre"))))) (apply (trigger "Surrounded" P2))) (to if:(is Friend (who at:(to)))))})))) (piece "Thrall" P2 (move Slide Orthogonal (between if:(and (!= (between) (centrePoint)) (is Empty (between)))) (then (custodial (from (last To)) Orthogonal (between (max 1) if:(= (what at:(between)) (id "Thrall1")) (apply (remove (between)))) (to if:(or (is Friend (who at:(to))) (= (to) (centrePoint)))))))) (piece "Jarl" P2 (move Slide Orthogonal (between if:(and (!= (between) (centrePoint)) (is Empty (between)))) (then (custodial (from (last To)) Orthogonal (between (max 1) if:(= (what at:(between)) (id "Thrall1")) (apply (remove (between)))) (to if:(or (is Friend (who at:(to))) (= (to) (centrePoint)))))))) (regions "OrthogonalSitesCentre" (difference (expand origin:(centrePoint) Orthogonal) (centrePoint)))}) (rules (start {(place "Thrall1" {"D1" "E1" "F1" "E2" "A4" "A5" "A6" "B5" "I4" "I5" "I6" "H5" "E8" "D9" "E9" "F9" "E8"}) (place "Thrall2" {"E3" "E4" "E6" "E7" "C5" "D5" "F5" "G5"}) (place "Jarl2" (centrePoint))}) (play (forEach Piece)) (end {(if (is Within (id "Jarl2") in:(sites Outer)) (result P2 Win)) (if (is Triggered "Surrounded" P2) (result P1 Win))}))) 