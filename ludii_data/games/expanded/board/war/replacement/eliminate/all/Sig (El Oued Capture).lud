(game "Sig (El Oued Capture)" (players 2) (equipment {(board (rectangle 3 6) {(track "Track1" "0,E,N1,W,N1,E,S1,W" loop:True P1) (track "Track2" "17,W,S1,E,S1,W,N1,E" P2 directed:True)}) (piece "Marker" Each) (hand Each) (dice d:2 from:0 num:6) (map "ExtraThrow" {(pair 0 3) (pair 1 1) (pair 2 0) (pair 3 0) (pair 4 0) (pair 5 1) (pair 6 1)})}) (rules (start {(place "Marker1" (sites Bottom)) (place "Marker2" (sites Top))}) (play (do (roll) next:(priority (forEach Piece (move (from (from) if:(and (not (= (state at:(from)) 1)) (or (or (= 1 (count Pips)) (= 5 (count Pips))) (= 1 (var "SpecialSig"))))) (to (trackSite Move steps:1) if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to))))) (then (and (set State at:(last To) 1) (if (= 1 (var "SpecialSig")) (and {(moveAgain) (set Var (+ (var) 1))})))))) (forEach Piece (move (from (from) if:(= (state at:(from)) 1)) (to (trackSite Move steps:(if (= 1 (var "SpecialSig")) (+ 1 (count Pips)) (count Pips))) if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))))) (then (if (!= 0 (mapEntry "ExtraThrow" (count Pips))) (and (if (= 3 (mapEntry "ExtraThrow" (count Pips))) (if (<= (var) 0) (set Var 2))) (if (!= (mover) (prev)) (and (moveAgain) (if (!= 1 (count Pips)) (set Var "SpecialSig" 1))))) (if (> (var) 0) (and {(set Var (- (var) 1)) (moveAgain)}) (set Var "SpecialSig" 0)))))) (end (if (no Pieces Next) (result Next Loss))))) 