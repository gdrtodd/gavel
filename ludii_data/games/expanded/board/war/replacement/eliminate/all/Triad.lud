(game "Triad" (players 3) (equipment {(board (hex 5)) (piece "Marker" Each (move Slide Orthogonal (to (apply if:(!= (mover) (mapEntry "PlayerPhase" (phase of:(to)))))) (then (and {(forEach Site (sites Around (last To) Orthogonal) (if (is Enemy (what at:(site))) (remove (site)))) (set Var (mapEntry "PlayerPhase" (phase of:(last To)))) (moveAgain)})))) (map "PlayerPhase" {(pair 1 1) (pair 0 2) (pair 2 3)})}) (rules (start {(place "Marker1" (expand origin:(coord "A5") steps:2)) (place "Marker2" (expand origin:(coord "I9") steps:2)) (place "Marker3" (expand origin:(coord "E1") steps:2))}) (play (if (is Prev Mover) (move Add (piece (if (= (mover) 1) (if (= (var) 2) 3 2) (if (= (mover) 2) (if (= (var) 1) 3 1) (if (= (var) 1) 2 1)))) (to (sites Empty)) (then (set NextPlayer (player (var))))) (max Captures (forEach Piece)))) (end (if (or {(no Pieces P1) (no Pieces P2) (no Pieces P3)}) (byScore {(score P1 (count Pieces P1)) (score P2 (count Pieces P2)) (score P3 (count Pieces P3))}))))) 