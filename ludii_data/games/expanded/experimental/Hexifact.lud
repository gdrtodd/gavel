(game "Hexifact" (players 2) (equipment {(board (tri Limping 3) use:Vertex) (piece "Disc" Each)}) (rules (play (or {(move Add (piece (id "Disc" Mover)) (to (sites Empty) if:(or (and (no Pieces Mover in:(sites Around (to) Orthogonal)) (not (no Pieces Next in:(sites Around (to) Orthogonal)))) (= -1 (counter)))) (then (forEach Site (sites Occupied by:Mover) (set State at:(site) 0)))) (if (no Pieces Mover in:(sites State 1)) (do (forEach Piece (move Hop (from if:(= 0 (state at:(from)))) Orthogonal (between (range 1 1000000000) if:(is In (between) (sites Occupied by:Next))) (to if:(is In (to) (sites Empty))) (then (set State at:(last To) 1))) Mover) ifAfterwards:(all Sites (sites Occupied by:Mover) if:(> 4 (count Pieces Mover in:(sites Around (site) Orthogonal)))))) (move Pass)} (then (do (and {(remember Value 0) (remember Value 0) (forEach Group Orthogonal (remember Value (count Sites in:(sites))))}) next:(set Var "TopValue" (max (values Remembered)) (then (forget Value (max (values Remembered)) (then (set Score Mover (* (var "TopValue") (max (values Remembered))) (then (forget Value All))))))))))) (end (if (all Passed) {(if (>= (score Mover) (score Next)) (result Mover Win))} (result Next Win))))) 