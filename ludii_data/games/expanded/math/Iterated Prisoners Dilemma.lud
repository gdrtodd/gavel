(game "Iterated Prisoners Dilemma" (players 2) (mode Simultaneous) (equipment {(board (square 2))}) (rules (play (or {(move Select (from 0) P1 (then (set Var "Choice1" 0))) (move Select (from 1) P1 (then (set Var "Choice1" 1))) (move Select (from 2) P2 (then (set Var "Choice2" 0))) (move Select (from 3) P2 (then (set Var "Choice2" 1)))} (then (if (and (= 0 (var "Choice1")) (= 0 (var "Choice2"))) (and (addScore P1 3) (addScore P2 3)) (if (and (= 1 (var "Choice1")) (= 1 (var "Choice2"))) (and (addScore P1 1) (addScore P2 1)) (if (and (= 0 (var "Choice1")) (= 1 (var "Choice2"))) (and (addScore P1 0) (addScore P2 5)) (and (addScore P1 5) (addScore P2 0))))) applyAfterAllMoves:True))) (end (if (= (counter) 8) (byScore))))) 