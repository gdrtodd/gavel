(game "Contagion" (players 2) (equipment {(board (rectangle 8 8))}) (rules (start (set Score P2 (* (count Rows) (count Columns)))) phases:{(phase "InitContagion" P1 (play (move Add (to Cell (sites Empty Cell)) (then (and (if (< (count MovesThisTurn) (- 3 1)) (moveAgain)) (addScore {P1 P2} {1 -1}))))) (nextPhase (not (is Next Mover)) "ContagionGrowth")) (phase "ContagionGrowth" P1 (play (move Add (to Cell (sites Empty Cell) if:(not (= (count Sites in:(sites Around (to) Own Orthogonal if:(= (count Sites in:(difference (intersection (sites Incident Edge of:Cell at:(from)) (sites Incident Edge of:Cell at:(to))) (sites Empty Edge))) 0))) 0))) (then (and (if (< (count MovesThisTurn) (- 3 1)) (moveAgain)) (addScore {P1 P2} {1 -1})))))) (phase "Containment" P2 (play (move Add (to Edge (sites Empty Edge)) (then (if (< (count MovesThisTurn) (- 4 1)) (moveAgain))))))} (end {(if (> (score P1) (/ (* (count Rows) (count Columns)) 2)) (result P1 Win)) (if (no Moves P1) (result P2 Win))}))) 