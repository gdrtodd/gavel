(game "BoxOff" (players 1) (equipment {(board (rectangle 6 8)) (piece "Disc1" P1) (piece "Disc2" P1) (piece "Disc3" P1)}) (rules (start {(place Random {"Disc1"} count:16) (place Random {"Disc2"} count:16) (place Random {"Disc3"} count:16)}) (play (move Select (from (sites Occupied by:All)) (to (difference (sites Occupied by:All) (from)) if:(and {(= (what at:(from)) (what at:(to))) (if (> (column of:(from)) (column of:(to))) (= 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Row (row of:(from))) (sites Row (row of:(to)))) if:(and (<= (column of:(site)) (column of:(from))) (>= (column of:(site)) (column of:(to)))))))) (= 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Row (row of:(from))) (sites Row (row of:(to)))) if:(and (<= (column of:(site)) (column of:(to))) (>= (column of:(site)) (column of:(from))))))))) (if (> (row of:(from)) (row of:(to))) (= 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Column (column of:(from))) (sites Column (column of:(to)))) if:(and (<= (row of:(site)) (row of:(from))) (>= (row of:(site)) (row of:(to)))))))) (= 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Column (column of:(from))) (sites Column (column of:(to)))) if:(and (<= (row of:(site)) (row of:(to))) (>= (row of:(site)) (row of:(from)))))))))})) (then (and (remove (last From)) (remove (last To)))))) (end {(if (no Pieces Mover) (result Mover Win)) (if (no Moves Mover) (result Mover Loss))}))) 