4x8 board. Two counters in each hole. Each player may sow in either direction on their first move, but must continue in the same direction for the remainder of the game. When the final counter of a sowing lands in an occupied hole, the counters in that hole are picked up and sowing continues. If the final hole of a sowing is in the inner row, regardless of whether it is occupied or empty, the player then captures the counters in both of the opponent's holes opposite it, and continues sowing with these counters as well as the ones in the final hole of sowing. Captures cannot be made when the final hole of a sowing was empty, and the opponent's opposite holes have only a single counter. When the final counter lands in an empty hole, the turn is over. The player who captures all the counters wins.
(game "Katra Boaoaka" (players 2) (equipment {(mancalaBoard 4 8 store:None {(track "TrackCCW1" "0,E,N1,W" loop:True P1) (track "TrackCCW2" "16,E,N1,W" loop:True P2) (track "TrackCW1" "7,W,N1,E" loop:True P1) (track "TrackCW2" "24,E,S1,W" loop:True P2)}) (regions "Home" P1 (sites Track "TrackCCW1")) (regions "Home" P2 (sites Track "TrackCCW2")) (regions "Inner" P1 (difference (sites Track "TrackCCW1") (sites Bottom))) (regions "Inner" P2 (difference (sites Track "TrackCCW2") (sites Top))) (piece "Seed" Shared) (hand Each)}) (rules (start (set Count 2 to:(union (sites P1 "Home") (sites P2 "Home")))) (play (or (if (notEqual (value Player Mover) 2) (move Select (from (if (is Prev Mover) (sites {(var "Replay")}) (sites Mover "Home")) if:(gt (count at:(from)) 0)) (then (and (sow "TrackCCW" owner:(mover) apply:(and (if (lt 1 (count at:(to))) (and (moveAgain) (set Var "Replay" (to)))) (if (is In (to) (sites Mover "Inner")) (if (not (and {(equals 1 (count at:(to))) (equals 1 (count at:(if (is Mover P1) (add (to) 8) (sub (to) 8)))) (equals 1 (count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))))})) (if (or (is Occupied (if (is Mover P1) (add (to) 8) (sub (to) 8))) (is Occupied (if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) (and {(fromTo (from (if (is Mover P1) (add (to) 8) (sub (to) 8))) (to (to)) count:(count at:(if (is Mover P1) (add (to) 8) (sub (to) 8)))) (fromTo (from (if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))) (to (to)) count:(count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) (if (equals 1 (count at:(to))) (and (moveAgain) (set Var "Replay" (to))))})))))) (if (notEqual (value Player Mover) 1) (set Value Mover 1)))))) (if (notEqual (value Player Mover) 1) (move Select (from (if (is Prev Mover) (sites {(var "Replay")}) (sites Mover "Home")) if:(gt (count at:(from)) 0)) (then (and (sow "TrackCW" owner:(mover) apply:(and (if (lt 1 (count at:(to))) (and (moveAgain) (set Var "Replay" (to)))) (if (is In (to) (sites Mover "Inner")) (if (not (and {(equals 1 (count at:(to))) (equals 1 (count at:(if (is Mover P1) (add (to) 8) (sub (to) 8)))) (equals 1 (count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))))})) (if (or (is Occupied (if (is Mover P1) (add (to) 8) (sub (to) 8))) (is Occupied (if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) (and {(fromTo (from (if (is Mover P1) (add (to) 8) (sub (to) 8))) (to (to)) count:(count at:(if (is Mover P1) (add (to) 8) (sub (to) 8)))) (fromTo (from (if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))) (to (to)) count:(count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) (if (equals 1 (count at:(to))) (and (moveAgain) (set Var "Replay" (to))))})))))) (if (notEqual (value Player Mover) 2) (set Value Mover 2)))))))) (end (forEach NonMover if:(no Moves Player) (result Player Loss))))) 
