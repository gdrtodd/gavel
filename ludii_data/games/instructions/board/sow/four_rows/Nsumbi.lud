4x8 board. Two counters in each hole. Players sow in an anti-clockwise direction from any of their holes. Singletons may not be sowed. Players capture when the sowing ends in a player's inner row and the opponent's inner and outer row holes opposite contain counters; these are captured and sown in the player's rows starting from the same hole that the previous sowing began. If the final counter lands in an occupied hole but capture is not possible, the counters in this hole are picked up and sowing continues. If the final counter ends in an empty hole, the turn ends. Captures cannot be made on each player's first turn. Play continues until one player has no holes with two or more counters, and the opponent wins.
(game "Nsumbi" (players 2) (equipment {(mancalaBoard 4 8 store:None {(track "Track1" "0,E,N1,W" loop:True P1) (track "Track2" "16,E,N1,W" loop:True P2)}) (regions "Home" P1 (sites Track "Track1")) (regions "Home" P2 (sites Track "Track2")) (regions "Inner" P1 (difference (sites Track "Track1") (sites Bottom))) (regions "Inner" P2 (difference (sites Track "Track2") (sites Top))) (piece "Seed" Shared)}) (rules (start (set Count 2 to:(union (sites P1 "Home") (sites P2 "Home")))) phases:{(phase "Opening" (play (move Select (from (sites Mover)) (then (sow "Track" owner:(mover))))) (nextPhase Mover "Playing")) (phase "Playing" (play (move Select (from (if (is Prev Mover) (sites {(last To afterConsequence:True)}) (sites Mover)) if:(lt 1 (count at:(from)))) (then (sow "Track" owner:(mover) apply:(if (and {(lt 1 (count at:(to))) (is In (to) (sites Mover "Inner")) (gt (count at:(if (is Mover P1) (add (to) 8) (sub (to) 8))) 0) (gt (count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))) 0)}) (and {(fromTo (from (if (is Mover P1) (add (to) 8) (sub (to) 8))) (to (last From)) count:(count at:(if (is Mover P1) (add (to) 8) (sub (to) 8)))) (fromTo (from (if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2)))) (to (last From)) count:(count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) (sow (last From) count:(add (count at:(if (is Mover P1) (add (to) 8) (sub (to) 8))) (count at:(if (is Mover P1) (add (to) (mul 8 2)) (sub (to) (mul 8 2))))) "Track" owner:(mover) origin:True)}) (if (lt 1 (count at:(to))) (moveAgain))))))))} (end (if (no Moves Next) (result Mover Win))))) 
