2x12 board. Starting position, from the left hand hole, for each player: 0-3-3-0-3-3-0-3-3-0-3-3 In the opening play, one player must sow two counters from the second hole from their right. The opponent then makes the same play from their row, or from the fourth hole from their right. When the final counter lands in an occupied hole, these are picked up and sowing continues. A player's turn ends when the final counter falls into an empty hole. Players may now begin their move from any hole in their row, but only if it ends in an empty hole in their row or if it enters the opponent's row. If the final counter lands in an occupied hole in the opponent's row, these are picked up and sowing continues. If the final counter lands in an occupied hole in the player's row, the contents of the hole in the opponent's hole opposite it are captured. Sowing ends when a capture is made or when a counter falls into an empty hole.
(game "Intotoi" (players 2) (equipment {(mancalaBoard 2 12 store:None (track "Track" "0,E,N,W" loop:True)) (piece "Seed" Shared) (hand Each) (regions P1 (sites Bottom)) (regions P2 (sites Top))}) (rules (start (set Count 3 to:(sites {1 2 4 5 7 8 10 11 22 21 19 18 16 15 13 12}))) phases:{(phase "Opening1" (play (move Select (from 10) (then (sow count:2)))) (nextPhase "Opening2")) (phase "Opening2" (play (if (is Prev Mover) (move Select (from (sites {(last To afterConsequence:True)}) if:(gt (count at:(from)) 0)) (then (sow apply:(if (notEqual 1 (count at:(to))) (moveAgain))))) (move Select (from (sites {13 15}) if:(gt (count at:(from)) 0)) (then (sow count:2 apply:(if (notEqual 1 (count at:(to))) (moveAgain))))))) (nextPhase (not (is Next Mover)) "Play")) (phase "Play" (play (move Select (from (sites From (do (move Select (from (sites Mover) if:(gt (count at:(from)) 0)) (then (sow))) ifAfterwards:(or (and (equals 1 (count at:(last To afterConsequence:True))) (is In (last To afterConsequence:True) (sites Mover))) (is In (last To afterConsequence:True) (sites Next))))) if:(gt (count at:(from)) 0)) (then (sow apply:(if (equals 1 (count at:(to))) (if (and (is Occupied (if (is Mover P1) (add (to) 12) (sub (to) 12))) (is In (to) (sites Mover))) (fromTo (from (if (is Mover P1) (add (to) 12) (sub (to) 12))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) 12) (sub (to) 12))))) (moveAgain)))))) (nextPhase Mover (is Next Mover) "Replay")) (phase "Replay" (play (move Select (from (sites {(last To afterConsequence:True)}) if:(gt (count at:(from)) 0)) (then (sow apply:(if (equals 1 (count at:(to))) (if (and (is Occupied (if (is Mover P1) (add (to) 12) (sub (to) 12))) (is In (to) (sites Mover))) (fromTo (from (if (is Mover P1) (add (to) 12) (sub (to) 12))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) 12) (sub (to) 12))))) (moveAgain)))))) (nextPhase Mover (not (is Next Mover)) "Play"))} (end (if (no Moves Mover) (byScore {(score P1 (add (count Cell at:(handSite P1)) (count in:(sites P1)))) (score P2 (add (count Cell at:(handSite P2)) (count in:(sites P2))))}))))) 
