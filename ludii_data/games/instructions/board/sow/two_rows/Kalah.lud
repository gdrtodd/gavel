The board has two rows of six holes with a larger hole on either end. Play begins with four seeds in each hole. Each player controls the row nearest them. Seeds are sown consecutively in a counterclockwise pattern including the player's own larger hole but not the opponent's. If the last seed is placed in an opponent's empty hole, that seed and any opposite are captured and put in the player's larger hole. If the last seed falls in the larger hole, the player gets another turn. When one player has no seeds in any of their holes, the game ends. The other player captures all of the other seeds, and the player with the most captured seeds wins.
(game "Kalah" (players 2) (equipment {(mancalaBoard 2 6 (track "Track" "0,ESE,E,ENE,WNW,N,W" loop:True)) (regions P1 (sites Bottom)) (regions P2 (sites Top)) (map {(pair P1 LastSite) (pair P2 FirstSite)}) (piece "Seed" Shared)}) (rules (start (set Count 4 to:(union (sites P1) (sites P2)))) (play (move Select (from (sites Mover) if:(gt (count at:(from)) 0)) (then (sow apply:(if (equals (to) (mapEntry (mover))) (moveAgain) (if (and {(is In (to) (sites Mover)) (equals (count at:(to)) 1) (gt (count at:(if (is Mover P1) (add (to) 6) (sub (to) 6))) 0)}) (and (fromTo (from (to)) (to (mapEntry (mover))) count:(count at:(to))) (fromTo (from (if (is Mover P1) (add (to) 6) (sub (to) 6))) (to (mapEntry (mover))) count:(count at:(if (is Mover P1) (add (to) 6) (sub (to) 6))))))) skipIf:(equals (to) (mapEntry (next))))))) (end (if (no Moves Mover) (byScore {(score P1 (add (count at:(mapEntry P1)) (count in:(sites P1)))) (score P2 (add (count at:(mapEntry P2)) (count in:(sites P2))))}))))) 
