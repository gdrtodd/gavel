The two players, Red and Blue, alternately place tokens on the intersections of the board until each has placed fifteen. Thereafter they alternate turns sliding a single token along a line to an adjacent vertex. A player who occupies the three vertices of any triangle has formed a mill and may relocate one enemy token. Occupying the four vertices of a square (forming a double mill) allows the player to relocate two enemy tokens. No more than two tokens may be relocated in a single turn, even if a player completes a mill and double mill with the same move. The winner is the first player to occupy all six vertices of either any neutral hexagon or one of his/her own color. A win can be achieved during either the placement or movement phases of the game.
(game "Kensington" (players 2) (equipment {(board (rotate 90 (tiling T3464 2)) use:Vertex) (hand Each) (piece "Marker" Each (move Step (to if:(is Empty (to))))) (regions "HexA" P1 (sites Cell "E4")) (regions "HexB" P1 (sites Cell "I4")) (regions "HexA" P2 (sites Cell "E12")) (regions "HexB" P2 (sites Cell "I12")) (regions "HexNeutral1" (sites Cell "C8")) (regions "HexNeutral2" (sites Cell "G8")) (regions "HexNeutral3" (sites Cell "K8"))}) (rules (start (place "Marker" "Hand" count:15)) (play (if (is Prev Mover) (move (from (sites Occupied by:Next container:"Board")) (to (sites Empty) (apply if:(is Pending) (moveAgain)))) (if (all Sites (sites Hand Mover) if:(equals 0 (count Cell at:(site)))) (forEach Piece) (move (from (handSite Mover)) (to (sites Empty))) (then (forEach Site (sites Incident Cell of:Vertex at:(last To)) (if (equals (count Sites in:(intersection (sites Incident Vertex of:Cell at:(site)) (sites Occupied by:Mover))) (count Sites in:(sites Incident Vertex of:Cell at:(site)))) (if (equals 6 (count Sites in:(sites Incident Vertex of:Cell at:(site)))) (if (or {(equals (sites Incident Vertex of:Cell at:(site)) (sites Mover "HexA")) (equals (sites Incident Vertex of:Cell at:(site)) (sites Mover "HexB")) (equals (sites Incident Vertex of:Cell at:(site)) (sites "HexNeutral1")) (equals (sites Incident Vertex of:Cell at:(site)) (sites "HexNeutral2")) (equals (sites Incident Vertex of:Cell at:(site)) (sites "HexNeutral3"))}) (trigger "Lose" Next)) (and (if (equals 4 (count Sites in:(sites Incident Vertex of:Cell at:(site)))) (set Pending)) (moveAgain))))))))) (end (if (is Triggered "Lose" Next) (result Mover Win))))) 
