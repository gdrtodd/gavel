3x15 board, with the central spot marked. Fifteen pieces per player, arranged along the outer two rows of the board. Another piece, the Gonagas ("king"), begins on the central marked square. Three four-sided dice, marked: X (=s치hkku; counts as 1), 2, 3, and blank, =0. To move, a player must throw three s치hkku with the three dice; they are given three throws to do so and may set aside any dice on which they throw s치hkku. Doing so activates a piece, which may then move according to the throws of the dice. The three throws of s치hkku may be used to activate up to three pieces, and use the remainder to move as normal. Dice throws can be used individually for different pieces, or all be used for one piece, but the values of single dice cannot be subdivided. Pieces move along the track, from left to right in their home row, right to left down the central row, left to right in the opponent's home row, right to left down the central row, and then back to the player's home row. When a piece lands on a spot occupied by the opponent's piece(s) which has been activated, the opponent's piece(s) are captured. The first player to reach the spot with the Gonagas controls it. The Gonagas may move orthogonally in any direction according to the throws of the dice. It cannot change direction while moving the value of one of the dice. If the opponent lands on the space with the Gonagas, the opponent then controls the Gonagas. Capturing all of the opponent's pieces is a win.
(game "Sahkku" (players 2) (equipment {(board (rectangle 3 15) {(track "Track1" "0,E,N1,W,N1,E,S1,W" loop:True P1) (track "Track2" "44,W,S1,E,S1,W,N1,E" loop:True P2)}) (dice d:4 from:0 num:3) (piece "Marker" Each (forEach Die if:(notEqual (pips) 0) (move (from (from) level:(level) if:(or (equals 1 (state at:(from) level:(level))) (equals 1 (pips)))) (to (trackSite Move from:(from) steps:(pips)) if:(or {(equals (id "Gonagas" Shared) (what at:(to))) (is Empty (to)) (and (is Enemy (who at:(to))) (equals 1 (state at:(to) level:(topLevel at:(to)))))}) (apply (and {(if (not (equals 1 (state at:(from) level:(level)))) (set State at:(from) level:(level) 1)) (forget Value "Pips" (pips)) (if (equals (what at:(to)) (id "Gonagas" Shared)) (set State at:(to) (mover)) (if (is Enemy (who at:(to))) (remove (to))))}))) (then (if (not (all DiceUsed)) (moveAgain)))))) (piece "Gonagas" Shared (forEach Die if:(notEqual (pips) 0) (move Slide (from (from) level:(level) if:(equals (state at:(from) level:(level)) (mover))) Orthogonal (between (exact (pips)) if:True) (to (apply if:(or (is Empty (to)) (and (is Enemy (who at:(to))) (equals 1 (state at:(to) level:(topLevel at:(to)))))))) (then (and (forEach Level (last To) (if (notEqual (topLevel at:(last To)) (level)) (remove (last To) level:(level)))) (if (not (all DiceUsed)) (moveAgain)))))))}) (rules (start {(place Stack "Marker1" (sites Bottom)) (place Stack "Marker2" (sites Top)) (place Stack "Gonagas" (centrePoint))}) phases:{(phase "Opening" (play (do (and (roll) (if (and (notEqual 0 (value Player Mover)) (equals 0 (count MovesThisTurn))) (set Value Mover 0))) next:(move Pass (then (and (if (is AnyDie 1) (set Value Mover (add (if (and (equals 1 (face 45)) (all DiceEqual)) 3 (if (or {(and {(not (equals 1 (face 45))) (equals 1 (face 46)) (equals 1 (face 47))}) (and {(equals 1 (face 45)) (not (equals 1 (face 46))) (equals 1 (face 47))}) (and {(equals 1 (face 45)) (equals 1 (face 46)) (not (equals 1 (face 47)))})}) 2 (if (or {(and {(not (equals 1 (face 45))) (not (equals 1 (face 46))) (equals 1 (face 47))}) (and {(equals 1 (face 45)) (not (equals 1 (face 46))) (not (equals 1 (face 47)))}) (and {(not (equals 1 (face 45))) (equals 1 (face 46)) (not (equals 1 (face 47)))})}) 1 0))) (value Player Mover)))) (forEach Die (if (notEqual 0 (pips)) (remember Value "Pips" (pips))))))) (then (if (or (le 3 (value Player Mover)) (notEqual 2 (count MovesThisTurn))) (moveAgain) (and (forget Value "Pips" All) (set Value Mover 0)))))) (nextPhase Mover (le 3 (value Player Mover)) "PlayingPips")) (phase "PlayingPips" (play (do (if (not (is Prev Mover)) (roll)) next:(or (forEach Piece (forEach Value (values Remembered "Pips") (move (from (from) level:(level) if:(or (equals 1 (state at:(from) level:(level))) (equals 1 (value)))) (to (trackSite Move from:(from) steps:(value)) if:(or {(equals (id "Gonagas" Shared) (what at:(to))) (is Empty (to)) (and (is Enemy (who at:(to))) (equals 1 (state at:(to) level:(topLevel at:(to)))))}) (apply (and {(if (not (equals 1 (state at:(from) level:(level)))) (set State at:(from) level:(level) 1)) (forget Value "Pips" (value)) (if (equals (what at:(to)) (id "Gonagas" Shared)) (set State at:(to) (mover)) (if (is Enemy (who at:(to))) (remove (to))))}))) (then (if (notEqual 0 (size Array (values Remembered "Pips"))) (moveAgain)))))) (forEach Piece (forEach Value (values Remembered "Pips") (move Slide (from (from) level:(level) if:(equals (state at:(from) level:(level)) (mover))) Orthogonal (between (exact (value)) if:True) (to (apply if:(or (is Empty (to)) (and (is Enemy (who at:(to))) (equals 1 (state at:(to) level:(topLevel at:(to)))))))) (then (and {(forEach Level (last To) (if (notEqual (topLevel at:(last To)) (level)) (remove (last To) level:(level)))) (forget Value "Pips" (count Steps (last From) (last To))) (if (notEqual 1 (size Array (values Remembered "Pips"))) (moveAgain))})))) Shared)))) (nextPhase Mover (equals 0 (size Array (values Remembered "Pips"))) "Playing")) (phase "Playing" (play (do (if (not (is Prev Mover)) (roll)) next:(or (forEach Piece) (forEach Piece Shared)))))} (end (if (no Pieces Next) (result Next Loss))))) 
