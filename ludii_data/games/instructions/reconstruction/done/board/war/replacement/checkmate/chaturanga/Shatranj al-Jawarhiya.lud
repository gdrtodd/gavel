The game Shatranj al-Jawarhiya is played by two players on a 8x7 rectangle board with square tiling. Regions: Promotion: the top sites of the board for P1 Promotion: the bottom sites of the board for P2 All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights and FerznoCrosses. Rules for Pieces: BishopnoCrosses hop diagonal. FerznoCrosses remove pieces at to then step diagonal. KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent. Knights leap a piece to not is a friend. Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in Promotion or Promotion, move again. Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells. Players take turns moving. Setup: Place a Pawn for player one at each cell of the 1 row. Place a Pawn for player two at each cell of the 6 row. Place a Rook for player one on sites: A1 and G1. Place a Knight for player one on site and B1. Place a BishopnoCross for player one on sites: C1 and F1. Place a FerznoCross for player one on site D1. Place a KingnoCross for player one on site E1. Place a Rook for player two on sites: A8 and G8. Place a Knight for player two on site and F8. Place a BishopnoCross for player two on sites: B8 and E8. Place a FerznoCross for player two on site C8. Place a KingnoCross for player two on site D8.. Rules: If in the same turn, a piece of the moving player the to location of the last move, this piece can promote into FerznoCross, else move one of your pieces. Aim: If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the number of pieces owned by Player the next player is equal to 1, the moving player wins If the next player cannot move, the moving player wins. The Shatranj al-Jawarhiya (Ludii 1) ruleset.
(game "Shatranj al-Jawarhiya" (players 2) (equipment {(board (rectangle 8 7)) (piece "Pawn" Each (or {(move Step Forward (to if:(is Empty (to)))) (move Step (directions {FR FL}) (to if:(is Enemy (who at:(to))) (apply (remove (to)))))} (then (if (is In (last To) (sites Mover "Promotion")) (moveAgain))))) (piece "Rook" Each (move Slide Orthogonal (to if:(is Enemy (who at:(to))) (apply (remove (to)))))) (piece "KingnoCross" Each (move Step (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to))))))) (piece "BishopnoCross" Each (move Hop Diagonal (between if:True) (to if:(or (is Empty (to)) (is Enemy (who at:(to)))) (apply (remove (to)))))) (piece "Knight" Each (move Leap {{F F R F} {F F L F}} (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to))))))) (piece "FerznoCross" Each (move Step Diagonal (to if:(not (is Friend (who at:(to)))) (apply (remove (to)))))) (regions "Promotion" P1 (sites Top)) (regions "Promotion" P2 (sites Bottom))}) (rules (start {(place "Pawn1" (sites Row 1)) (place "Pawn2" (sites Row 6)) (place "Rook1" {"A1" "G1"}) (place "Knight1" {"B1"}) (place "BishopnoCross1" {"C1" "F1"}) (place "FerznoCross1" coord:"D1") (place "KingnoCross1" coord:"E1") (place "Rook2" {"A8" "G8"}) (place "Knight2" {"F8"}) (place "BishopnoCross2" {"B8" "E8"}) (place "FerznoCross2" coord:"C8") (place "KingnoCross2" coord:"D8")}) (play (if (is Prev Mover) (move Promote (last To) (piece "FerznoCross") Mover) (do (forEach Piece) ifAfterwards:(not (is Threatened (id "KingnoCross" Mover)))))) (end {(if (and (is Threatened (id "KingnoCross" Next)) (not (can Move (do (forEach Piece Next) ifAfterwards:(not (is Threatened (id "KingnoCross" Next))))))) (result Mover Win)) (if (equals (count Pieces Next) 1) (result Mover Win)) (if (no Moves Next) (result Mover Win))}))) 
