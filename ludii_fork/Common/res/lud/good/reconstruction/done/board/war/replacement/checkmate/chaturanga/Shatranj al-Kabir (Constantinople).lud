(define "CaptureToPiece"
    (apply 
        (if ("IsEnemyAt" (to))
            (remove (to))
        )
    ) 
)

(define "EnemyNotImmumned" 
    (and ("IsEnemyAt" (to))
        (not 
            (and { 
                ("IsPieceAt" "Pawn" Next (to))
                (is In (to) (sites Mover))
            })
        )
    )
)

(define "CaptureForwardDiagonal"
    (move
        Step 
        (directions {FR FL}) 
        (to 
            if:("EnemyNotImmumned") 
            (apply (remove (to)))
        )
    )
)

//------------------------------------------------------------------------------

(game "Shatranj al-Kabir (Constantinople)"
    <Variant>
)

//------------------------------------------------------------------------------

(option "Variant" <Variant> args:{ <variant> }
    {
    (item "Shatranj al-Kabir (Constantinople) (Ludii 1)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Mover)
                    
                    (result Mover Loss)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 1) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 2)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (forEach Piece "FerznoCross" 
                    (move Hop Forward 
                        (between if:True)
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Mover)
                    
                    (result Mover Loss)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 2) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 3)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 3) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 4)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (forEach Piece "FerznoCross" 
                    (move Hop Forward 
                        (between if:True)
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 4) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 5)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (= 
                        (count Pieces Next)
                    1)
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 5) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 6)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (forEach Piece "FerznoCross" 
                    (move Hop Forward 
                        (between if:True)
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Mover)
                    
                    (result Mover Win)
                )
                
                (if 
                    (= 
                        (count Pieces Next)
                    1)
                    
                    (result Mover Win)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 6) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 7)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (forEach Piece "FerznoCross" 
                    (move Hop Forward 
                        (between if:True)
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Draw)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 7) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 8)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (if 
                    (is Prev Mover)
                    
                    (move Promote 
                        (last To)
                        
                        (piece "FerznoCross")
                    Mover)
                    
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "KingnoCross" Mover)
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Mover)
                    
                    (result Mover Loss)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 8) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 9)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (do 
                    (forEach Piece)
                    ifAfterwards:
                    (not 
                        (is Threatened 
                            (id "KingnoCross" Mover)
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Draw)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 9) ruleset.")
    
    (item "Shatranj al-Kabir (Constantinople) (Ludii 10)" <
        
        (players { 
            (player N)
            
            (player S)
            }
        )
        
        (equipment { 
            (board 
                (square 13)
            )
            
            (piece "Pawn" Each 
                (or 
                    (move Step Forward 
                        (to if:
                            (is Empty 
                                (to)
                            )
                        )
                    )
                    
                    (move Step 
                        (directions { FR FL}
                        )
                        
                        (to if:
                            (and 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (not 
                                    (and { 
                                        (= 
                                            (what at:
                                                (to)
                                            )
                                            
                                            (id "Pawn" Next)
                                        )
                                        
                                        (is In 
                                            (to)
                                            
                                            (sites Mover)
                                        )
                                        }
                                    )
                                )
                            )
                            
                            (apply 
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                    
                    (then 
                        (if 
                            (is In 
                                (last To)
                                
                                (sites Mover "Promotion")
                            )
                            
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move Slide Orthogonal 
                    (to if:
                        (is Enemy 
                            (who at:
                                (to)
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "KingnoCross" Each 
                (move Step 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "BishopnoCross" Each 
                (move Hop Diagonal 
                    (between if:True)
                    
                    (to if:
                        (or 
                            (is Empty 
                                (to)
                            )
                            
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Knight" Each 
                (move Leap { { F F R F}
                    { F F L F}
                    }
                    
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "FerznoCross" Each 
                (move Step Diagonal 
                    (to if:
                        (not 
                            (is Friend 
                                (who at:
                                    (to)
                                )
                            )
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Rhino" Each 
                (or 
                    (move Slide Diagonal 
                        (to if:
                            (is Enemy 
                                (who at:
                                    (to)
                                )
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                    
                    (move Leap { { F F R F}
                        { F F L F}
                        }
                        
                        (to if:
                            (is Empty 
                                (to)
                            )
                            
                            (apply 
                                (if 
                                    (is Enemy 
                                        (who at:
                                            (to)
                                        )
                                    )
                                    
                                    (remove 
                                        (to)
                                    )
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Gazelle" Each 
                (move Leap { { F F F R F}
                    { F F F L F}
                    }
                    
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (if 
                                (is Enemy 
                                    (who at:
                                        (to)
                                    )
                                )
                                
                                (remove 
                                    (to)
                                )
                            )
                        )
                    )
                )
            )
            
            (piece "Amazon" Each 
                (forEach Direction Diagonal 
                    (to if:
                        (is Empty 
                            (to)
                        )
                        
                        (apply 
                            (and { 
                                (move 
                                    (from)
                                    
                                    (to 
                                        (sites To 
                                            (slide 
                                                (from 
                                                    (to)
                                                )
                                                Orthogonal 
                                                (between 
                                                    (min 3)
                                                )
                                                
                                                (to if:
                                                    (is Enemy 
                                                        (who at:
                                                            (to)
                                                        )
                                                    )
                                                    
                                                    (apply 
                                                        (if 
                                                            (is Enemy 
                                                                (who at:
                                                                    (to)
                                                                )
                                                            )
                                                            
                                                            (remove 
                                                                (to)
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                                }
                            )
                        )
                    )
                )
            )
            
            (regions P1 
                (sites Bottom)
            )
            
            (regions P2 
                (sites Top)
            )
            }
        )
        
        (rules 
            (start { 
                (place "Pawn1" 
                    (sites Row 3)
                )
                
                (place "Pawn2" 
                    (sites Row 9)
                )
                
                (place "Rook1" 
                    (sites { "A1" "M1"}
                    )
                )
                
                (place "Rook2" 
                    (sites { "A13" "M13"}
                    )
                )
                
                (place "Knight1" 
                    (sites { "B1" "L1"}
                    )
                )
                
                (place "Knight2" 
                    (sites { "B13" "L13"}
                    )
                )
                
                (place "BishopnoCross1" 
                    (sites { "C1" "K1"}
                    )
                )
                
                (place "BishopnoCross2" 
                    (sites { "C13" "K13"}
                    )
                )
                
                (place "Rhino1" 
                    (sites { "D1" "J1"}
                    )
                )
                
                (place "Rhino2" 
                    (sites { "D13" "J13"}
                    )
                )
                
                (place "Gazelle1" 
                    (sites { "E1" "I1"}
                    )
                )
                
                (place "Gazelle2" 
                    (sites { "E13" "I13"}
                    )
                )
                
                (place "Amazon1" 
                    (sites { "F1"}
                    )
                )
                
                (place "Amazon2" 
                    (sites { "H13"}
                    )
                )
                
                (place "KingnoCross1" 
                    (sites { "G1"}
                    )
                )
                
                (place "KingnoCross2" 
                    (sites { "G13"}
                    )
                )
                
                (place "FerznoCross1" 
                    (sites { "H1"}
                    )
                )
                
                (place "FerznoCross2" 
                    (sites { "F13"}
                    )
                )
                }
            )
            
            (play 
                (if 
                    (is Prev Mover)
                    
                    (move Promote 
                        (last To)
                        
                        (piece "FerznoCross")
                    Mover)
                    
                    (do 
                        (forEach Piece)
                        ifAfterwards:
                        (not 
                            (is Threatened 
                                (id "KingnoCross" Mover)
                            )
                        )
                    )
                )
            )
            
            (end { 
                (if 
                    (and 
                        (is Threatened 
                            (id "KingnoCross" Next)
                        )
                        
                        (not 
                            (can Move 
                                (do 
                                    (forEach Piece Next)
                                    ifAfterwards:
                                    (not 
                                        (is Threatened 
                                            (id "KingnoCross" Next)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    
                    (result Mover Win)
                )
                
                (if 
                    (= 
                        (count Pieces Next)
                    1)
                    
                    (result Mover Win)
                )
                
                (if 
                    (no Moves Next)
                    
                    (result Mover Win)
                )
                }
            )
        )
        
    > "The Shatranj al-Kabir (Constantinople) (Ludii 10) ruleset.")
    
    (item "Incomplete"
        <
        ("TwoPlayersNorthSouth") 
        (equipment {
            (board (square 13))
            (piece "Pawn" Each 
                (or 
                    "StepForwardToEmpty" 
                    "CaptureForwardDiagonal"
                    (then
                        (if (is In (last To) (sites Mover "Promotion")) 
                            (moveAgain)
                        )
                    )
                )
            )
            
            (piece "Rook" Each 
                (move
                    Slide 
                    Orthogonal 
                    (to 
                        if:("IsEnemyAt" (to)) 
                        "CaptureToPiece"
                    ) 
                )
            )
            (piece "King_noCross" Each 
                (move
                    Step 
                    (to 
                        if:(not ("IsFriendAt" (to))) 
                        "CaptureToPiece" 
                    )
                )
            )
            (piece "Bishop_noCross" Each 
                (move 
                    Hop 
                    Diagonal 
                    (between if:True) 
                    (to 
                        if:(or 
                            (is Empty (to)) 
                            ("IsEnemyAt" (to))
                        ) 
                        "CaptureToPiece"
                    )
                )
            )
            (piece "Knight" Each 
                (move 
                    Leap 
                    "KnightWalk" 
                    (to 
                        if:(not ("IsFriendAt" (to))) 
                        "CaptureToPiece"
                    ) 
                )
            )
            (piece "Ferz_noCross" Each 
                (move
                    Step 
                    Diagonal
                    (to 
                        if:(not ("IsFriendAt" (to))) 
                        "CaptureToPiece" 
                    )
                )
            )
            
            (piece "Rhino" Each // Karkaddan in the desc
                (or
                    (move
                        Slide 
                        Diagonal
                        (to 
                            if:("IsEnemyAt" (to))
                            "CaptureToPiece"
                        ) 
                    )	
                    (move
                        Leap 
                        "KnightWalk" 
                        (to 
                            if:(is Empty (to))
                            "CaptureToPiece"
                        ) 
                    )
                )
            )
            (piece "Gazelle" Each // Ahu in the desc
                (move
                    Leap 
                    { {F F F R F } {F F F L F } } 
                    (to 
                        if:(is Empty (to))
                        "CaptureToPiece"
                    ) 
                )
            )
            
            (piece "Amazon" Each
                (forEach Direction 
                    Diagonal 
                    (to 
                        if:(is Empty (to)) 
                        (apply 
                            (and {
                                (move (from)
                                    (to 
                                        (sites To
                                            (slide 
                                                (from (to))
                                                Orthogonal
                                                (between (min 3))
                                                (to 
                                                    if:("IsEnemyAt" (to))
                                                    "CaptureToPiece"
                                                ) 
                                            )
                                        )
                                    )
                                )
                            })
                        )
                    )
                )		
            )
            (regions P1 (sites Bottom))
            (regions P2 (sites Top))
        })
        (rules 
            (start {
                (place "Pawn1" (sites Row 3))
                (place "Pawn2" (sites Row 9))
                (place "Rook1" (sites {"A1" "M1"})) (place "Rook2" (sites {"A13" "M13"}))
                (place "Knight1" (sites {"B1" "L1"})) (place "Knight2" (sites {"B13" "L13"}))
                (place "Bishop_noCross1" (sites {"C1" "K1"})) (place "Bishop_noCross2" (sites {"C13" "K13"}))
                (place "Rhino1" (sites {"D1" "J1"})) (place "Rhino2" (sites {"D13" "J13"}))
                (place "Gazelle1" (sites {"E1" "I1"})) (place "Gazelle2" (sites {"E13" "I13"}))
                (place "Amazon1" (sites {"F1"})) (place "Amazon2" (sites {"H13"}))
                (place "King_noCross1" (sites {"G1"})) (place "King_noCross2" (sites {"G13"}))
                (place "Ferz_noCross1" (sites {"H1"})) (place "Ferz_noCross2" (sites {"F13"}))
            })
            (play [#])
            (end [#])
        )
        >
        "The incomplete ruleset."
    )
    
})

//------------------------------------------------------------------------------

(rulesets {
    
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 1) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 1)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 2) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 2)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 3) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 3)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 4) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 4)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 5) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 5)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 6) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 6)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 7) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 7)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 8) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 8)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 9) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 9)"
    })
    (ruleset "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 10) (Reconstructed)" {
        "Variant/Shatranj al-Kabir (Constantinople) (Ludii 10)"
    })
    
    (ruleset "Ruleset/Historical Information (Incomplete)" {
        "Variant/Incomplete"
    })
    
})

//------------------------------------------------------------------------------

(metadata 
    
    (info
        {
        (description "This game, named Shatranj al-Kabir by Aminallah Abu-Rafid Muhammad Hafid, was played in Constantinople in the early nineteenth century.")
        (aliases {"Shatranj al-Kabir"})
        (useFor "Ruleset/Historical Information (Incomplete)" (rules "13x13 board. The same pieces as Shatranj plus: five pawns per player, one Great Ferz, which moves as a Zurafa in Shatranj al-Kabir, two Karkaddan, which moves diagonally any distance or like a Knight, and two Ahu, which move like the Jamal in Shatranj al-Kabir. Pawns begin on the fourth rank of the board. Pieces are arranged as follows, beginning from the left corner: Rook, Knight, Fil, Karkaddan, Ahu, Great Ferz, Shah, Ferz, Ahu, Karkaddan, Fil, Knight, Rook."))
        (useFor "Ruleset/Historical Information (Incomplete)" (source "DLP evidence."))
        (useFor "Ruleset/Historical Information (Incomplete)" (id "1432"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 1) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move, the moving player loses.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 1) (Reconstructed)" (id "3289"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 2) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move, the moving player loses.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 2) (Reconstructed)" (id "3290"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 3) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 3) (Reconstructed)" (id "3291"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 4) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 4) (Reconstructed)" (id "3292"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 5) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the number of pieces owned by Player the next player is equal to 1, the moving player wins If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 5) (Reconstructed)" (id "3293"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 6) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move, the moving player wins If the number of pieces owned by Player the next player is equal to 1, the moving player wins.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 6) (Reconstructed)" (id "3294"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 7) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the next player cannot move, it's a draw.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 7) (Reconstructed)" (id "3295"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 8) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                If in the same turn, a piece of the moving player the to location of the last move, this piece can promote into FerznoCross, else move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the moving player cannot move, the moving player loses.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 8) (Reconstructed)" (id "3296"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 9) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                Move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the next player cannot move, it's a draw.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 9) (Reconstructed)" (id "3297"))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 10) (Reconstructed)" (rules "The game Shatranj al-Kabir (Constantinople) is played by two players on a 13x13 rectangle board with square tiling.
                Regions:
                RegionP1: the bottom sites of the board for P1
                RegionP2: the top sites of the board for P2 
                All players play with Pawns, Rooks, KingnoCrosses, BishopnoCrosses, Knights, FerznoCrosses, Rhinos, Gazelles and Amazons.
                Rules for Pieces:
                Amazons from cell in the location of the piece to cell in the to sites of slide from to in the orthogonal direction through [between] is in the set of empty cells moveRule: true, for all sites that can be reached from cell the location of the piece in the direction diagonal.
                BishopnoCrosses hop diagonal.
                FerznoCrosses if there is an enemy Player at to, remove pieces at to then step diagonal.
                Gazelles leap a piece to empty.
                KingnoCrosses if there is an enemy Player at to, remove pieces at to then step adjacent.
                Knights leap a piece to not is a friend.
                Pawns step forward or remove pieces at to then step forward-right or forward-left if the to location of the last move is in , move again.
                Rhinos slide from the location of the piece in the diagonal direction through [between] is in the set of empty cells or leap a piece to empty.
                Rooks slide from the location of the piece in the orthogonal direction through [between] is in the set of empty cells.
                Players take turns moving.
                Setup:
                Place a Pawn for player one at each cell of the 3 row.
                Place a Pawn for player two at each cell of the 9 row.
                Place a Rook for player one at the cells with coordinates [A1, M1].
                Place a Rook for player two at the cells with coordinates [A13, M13].
                Place a Knight for player one at the cells with coordinates [B1, L1].
                Place a Knight for player two at the cells with coordinates [B13, L13].
                Place a BishopnoCross for player one at the cells with coordinates [C1, K1].
                Place a BishopnoCross for player two at the cells with coordinates [C13, K13].
                Place a Rhino for player one at the cells with coordinates [D1, J1].
                Place a Rhino for player two at the cells with coordinates [D13, J13].
                Place a Gazelle for player one at the cells with coordinates [E1, I1].
                Place a Gazelle for player two at the cells with coordinates [E13, I13].
                Place a Amazon for player one at the cells with coordinates [F1].
                Place a Amazon for player two at the cells with coordinates [H13].
                Place a KingnoCross for player one at the cells with coordinates [G1].
                Place a KingnoCross for player two at the cells with coordinates [G13].
                Place a FerznoCross for player one at the cells with coordinates [H1].
                Place a FerznoCross for player two at the cells with coordinates [F13]..
                Rules: 
                If in the same turn, a piece of the moving player the to location of the last move, this piece can promote into FerznoCross, else move one of your pieces.
                Aim: 
                If KingnoCross of the next player is threatened and not can move move one of your pieces, the moving player wins If the number of pieces owned by Player the next player is equal to 1, the moving player wins If the next player cannot move, the moving player wins.
                
        "))
        (useFor "Ruleset/Shatranj al-Kabir (Constantinople) (Ludii 10) (Reconstructed)" (id "3298"))
        (source "Murray 1913: 346.")
        (version "1.3.10")
        (classification "board/war/replacement/checkmate/chaturanga/reconstruction/done")
        (credit "Eric Piette")
        (origin "This game was played in Turkey, from around 1805 to 1806.")
        }
    )
    
    (graphics {
        (piece Scale "Pawn" 0.825)
        (board Style Chess)
    })
    
)

