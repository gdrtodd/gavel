4x6-16 board. Play begins with two counters in each hole. The first move must be from the inner row. Play begins from any of the player's holes, sowing clockwise. When the final counter lands in an occupied hole, these are picked up and sowing continues. Captures are made when the final counter falls into an empty hole in the inner row, and the opponent's hole opposite contains counters. If it is, they are captured, and if the hole in to outer row opposite also contains counters, these are also captured. If the final counter falls into an empty hole and a capture cannot happen, the turn is over. Play ends when one player cannot move. Each player has 6 holes.
(game "Muvalavala (Luena)" (players 2) (equipment {(mancalaBoard 4 6 store:None {(track "Track1" "5,W,N1,E" loop:True P1) (track "Track2" "17,W,N1,E" loop:True P2)}) (regions "Home" P1 (sites Track "Track1")) (regions "Home" P2 (sites Track "Track2")) (regions "Inner" P1 (difference (sites Track "Track1") (sites Bottom))) (regions "Inner" P2 (difference (sites Track "Track2") (sites Top))) (piece "Seed" Shared) (hand Each)}) (rules (start (set Count 2 to:(union (sites P1 "Home") (sites P2 "Home")))) phases:{(phase "Opening" (play (move Select (from (if (is Prev Mover) (sites {(last To afterConsequence:True)}) (sites Mover "Inner")) if:(gt (count at:(from)) 0)) (then (sow "Track" owner:(mover) apply:(if (equals (count at:(to)) 1) (if (is In (to) (sites Mover "Inner")) (if (gt (count at:(if (is Mover P1) (add (to) 6) (sub (to) 6))) 0) (and (fromTo (from (if (is Mover P1) (add (to) 6) (sub (to) 6))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) 6) (sub (to) 6)))) (if (gt (count at:(if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2)))) 0) (fromTo (from (if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2)))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2))))))))) (moveAgain)))))) (nextPhase (ge (count Turns) 2) "Playing")) (phase "Playing" (play (move Select (from (if (is Prev Mover) (sites {(last To afterConsequence:True)}) (sites Mover "Home")) if:(gt (count at:(from)) 0)) (then (sow "Track" owner:(mover) apply:(if (equals (count at:(to)) 1) (if (is In (to) (sites Mover "Inner")) (if (gt (count at:(if (is Mover P1) (add (to) 6) (sub (to) 6))) 0) (and (fromTo (from (if (is Mover P1) (add (to) 6) (sub (to) 6))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) 6) (sub (to) 6)))) (if (gt (count at:(if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2)))) 0) (fromTo (from (if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2)))) (to (handSite Mover)) count:(count at:(if (is Mover P1) (add (to) (mul 6 2)) (sub (to) (mul 6 2))))))))) (moveAgain)))))))} (end (if (no Moves Mover) (byScore {(score P1 (add (count Cell at:(handSite P1)) (count in:(sites P1)))) (score P2 (add (count Cell at:(handSite P2)) (count in:(sites P2))))}))))) 
