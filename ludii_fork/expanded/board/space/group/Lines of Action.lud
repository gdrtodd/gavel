A player wins by connecting all of one's pieces into a contiguous body so that they are connected orthogonally or diagonally. Players alternate moves. Pieces move orthogonally or diagonally. A piece moves exactly as many spaces as there are pieces (belonging to both the player and their opponent) on the line in which it is moving. A piece may jump over the player's own pieces, but not over one belonging to the opponent. A piece can capture piece belonging to the opponent by landing on it. If the two players make a group in the same turn, the game ends in a draw.
(game "Lines of Action" (players 2) (equipment {(board (square 8)) (piece "Disc" Each (or {(move Hop (directions {N S}) (between (exact (sub (count Sites in:(difference (sites Column (column of:(from))) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {W E}) (between (exact (sub (count Sites in:(difference (sites Row (row of:(from))) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {NE SW}) (between (exact (sub (count Sites in:(difference (sites Direction from:(from) (directions {NE SW}) included:True) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to)))))) (move Hop (directions {NW SE}) (between (exact (sub (count Sites in:(difference (sites Direction from:(from) (directions {NW SE}) included:True) (sites Empty))) 1)) if:(not (is Enemy (who at:(between))))) (to if:(not (is Friend (who at:(to)))) (apply (if (is Enemy (who at:(to))) (remove (to))))))}))}) (rules (start {(place "Disc1" (difference (union (sites Top) (sites Bottom)) (sites Corners))) (place "Disc2" (difference (union (sites Right) (sites Left)) (sites Corners)))}) (play (forEach Piece)) (end {(if (and (equals 1 (count Groups if:(equals (who at:(to)) P1))) (equals 1 (count Groups if:(equals (who at:(to)) P2)))) (result Mover Draw)) (if (equals 1 (count Groups if:(equals (who at:(to)) P1))) (result P1 Win)) (if (equals 1 (count Groups if:(equals (who at:(to)) P2))) (result P2 Win))}))) 
