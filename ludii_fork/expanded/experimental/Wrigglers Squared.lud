Goal:Score the product of the sizes of your two largest chains. Highest score wins. In case of a tie, the last to play wins. Chains are a series of adjacent like-colored stones with no branching. Play: Boards starts empty. The darker color starts. On a turn the moving player does one of these actions: - Place one of their stones onto an empty site adjacent to no more than 2 of their stones, or - Remove one of their stones that is adjacent to more than two of their stones. Otherwise he passes. The game ends when both players pass. Order 9, Square Ortho-Grid
(game "Wrigglers Squared" (players 2) (equipment {(board (square 9) use:Vertex) (piece "Disc" Each)}) (rules (play (if (equals 1 (var "Added")) (or {(or {(move Add (piece (id "Disc" Mover)) (to (sites Empty) if:(gt 3 (count Pieces Mover in:(sites Around (to) Orthogonal)))) (then (set Var "Added" 1))) (move Pass)}) (forEach Piece (if (lt 2 (count Pieces Mover in:(sites Around (from) Orthogonal))) (move Remove (from) (then (set Var "Added" 0)))) Mover)}) (or {(move Add (piece (id "Disc" Mover)) (to (sites Empty) if:(gt 3 (count Pieces Mover in:(sites Around (to) Orthogonal)))) (then (set Var "Added" 1))) (move Pass)}) (then (do (forEach Site (sites Occupied by:Mover) (if (gt 3 (count Pieces Mover in:(sites Around (site) Orthogonal))) (set State at:(site) 0) (set State at:(site) 1))) next:(do (and {(remember Value 0) (remember Value 0) (forEach Group Orthogonal (if (no Pieces in:(intersection (sites) (sites State 1))) (remember Value (count Sites in:(sites)))))}) next:(set Var "TopValue" (max (values Remembered)) (then (forget Value (max (values Remembered)) (then (set Score Mover (mul (var "TopValue") (max (values Remembered))) (then (forget Value All)))))))))))) (end (if (all Passed) {(if (ge (score Mover) (score Next)) (result Mover Win))} (result Next Win))))) 
