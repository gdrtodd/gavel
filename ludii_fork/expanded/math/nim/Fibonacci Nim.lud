Fibonacci Nim is played by two players, who alternate removing coins or other counters from a pile. On the first move, a player is not allowed to take all of the coins, and on each subsequent move, the number of coins removed can be any number that is at most twice the previous move. According to the normal play convention, the player who takes the last coin wins. Or according to the Mis√®re game, the player who takes the last coin loses. The last mover wins. The game involves a pile of 40 pieces.
(game "Fibonacci Nim" (players 2) (equipment {(board (square 1)) (piece "Marker" Neutral)}) (rules (start (set Count 40 at:0)) (play (if (is Prev Mover) (or (if (le (add 1 (count MovesThisTurn)) (if (equals 1 (count Turns)) (sub 40 1) (mul 2 (value Player (prev MoverLastTurn))))) (move Select (from (last To)) (then (if (equals (count at:(last To)) 1) (remove (last To)) (and (set Count at:(last To) (sub (count at:(last To)) 1)) (moveAgain)))))) (move Pass (then (set Value Mover (sub (add 1 (count MovesThisTurn)) 1))))) (move Select (from (sites Occupied by:Neutral)) (then (if (equals (count at:(last To)) 1) (remove (last To)) (and (set Count at:(last To) (sub (count at:(last To)) 1)) (moveAgain))))))) (end (if (no Moves Next) (result Mover Win))))) 
