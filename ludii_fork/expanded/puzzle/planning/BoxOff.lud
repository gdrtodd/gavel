Start: The game starts with a piece in each cell, which defines the challenge to be solved. Play: The player then makes a series of moves, each involving the removal of a pair of same-coloured pieces that occupy a box (rectangle) that includes no other pieces of any colour. End: The player wins by removing all pieces from the board. Conversely, the player loses if there are no legal moves at any point while pieces remain on the board.
(game "BoxOff" (players 1) (equipment {(board (rectangle 6 8)) (piece "Disc1" P1) (piece "Disc2" P1) (piece "Disc3" P1)}) (rules (start {(place Random {"Disc1"} count:16) (place Random {"Disc2"} count:16) (place Random {"Disc3"} count:16)}) (play (move Select (from (sites Occupied by:All)) (to (difference (sites Occupied by:All) (from)) if:(and {(equals (what at:(from)) (what at:(to))) (if (gt (column of:(from)) (column of:(to))) (equals 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Row (row of:(from))) (sites Row (row of:(to)))) if:(and (le (column of:(site)) (column of:(from))) (ge (column of:(site)) (column of:(to)))))))) (equals 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Row (row of:(from))) (sites Row (row of:(to)))) if:(and (le (column of:(site)) (column of:(to))) (ge (column of:(site)) (column of:(from))))))))) (if (gt (row of:(from)) (row of:(to))) (equals 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Column (column of:(from))) (sites Column (column of:(to)))) if:(and (le (row of:(site)) (row of:(from))) (ge (row of:(site)) (row of:(to)))))))) (equals 0 (count Sites in:(intersection (difference (sites Occupied by:All) (sites {(from) (to)})) (forEach (union (sites Column (column of:(from))) (sites Column (column of:(to)))) if:(and (le (row of:(site)) (row of:(to))) (ge (row of:(site)) (row of:(from)))))))))})) (then (and (remove (last From)) (remove (last To)))))) (end {(if (no Pieces Mover) (result Mover Win)) (if (no Moves Mover) (result Mover Loss))}))) 
